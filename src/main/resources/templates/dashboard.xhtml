<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" class="navbar-vertical-collapsed" lang="en-US" dir="ltr" data-navigation-type="default" data-navbar-horizontal-shape="default">
    <th:block th:replace="~{fragments/entityscFragments :: headerfiles}"></th:block>
    <body onload="preloaderFunction()" style="margin: 0;">
        <div id="loader"></div>
        <main class="main animate-bottom" id="top" style="display:none;">
            <th:block th:replace="~{fragments/entityscFragments :: leftMenu}"></th:block>
            <th:block th:replace="~{fragments/entityscFragments :: topMenu}"></th:block>
            <div class="content">
                <div class="row">
                    <div class="col-lg-9 col-sm-12 col-md-12">
                        <div class="mb-8">
                            <h4 class="mb-2 text-primary">Euclase Dashboard</h4>
                            <h6 class="text-700 fw-semi-bold">Electronic Document Management Solution</h6>
                        </div>
                    </div>
                    <div class="col-lg-3 col-sm-12 col-md-12">
                        <div class="mb-8">
                            <h4 class="mb-2 text-primary"></h4>
                            <h6 class="text-primary">
                                <span th:text="${session.companyName}"></span> <span>\</span>
                                <span th:text="${session.branchName}"></span>
                            </h6>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-8 col-md-12 col-sm-12">
                        <div id="monthlyDocuments" class="bar-charts-ext"></div>
                    </div>
                    <div class="col-lg-4 col-md-12 col-sm-12">
                        <h5 class="text-primary mb-3 pl-15">Quick Link</h5>
                        <div class="row g-4 mb-5">
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <a th:href="@{/document/}">
                                    <div class="d-flex align-items-center"><img src="" th:src="@{/images/icons/illustrations/18.png}" alt="" height="46" width="46" />
                                        <div class="ms-3">
                                            <p class="text-secondary">Create Document</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <a th:href="@{/document/my}">
                                    <div class="d-flex align-items-center"><img src="" th:src="@{/images/icons/illustrations/19.png}" alt="" height="46" width="46" />
                                        <div class="ms-3">
                                            <p class="text-secondary">My Documents</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <a th:href="@{/document/draft}">
                                    <div class="d-flex align-items-center"><img src="" th:src="@{/images/icons/illustrations/26.png}" alt="" height="46" width="46" />
                                        <div class="ms-3">
                                            <p class="text-secondary">Draft Documents</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <a th:href="@{/document/archive}">
                                    <div class="d-flex align-items-center"><img src="" th:src="@{/images/icons/illustrations/14.png}" alt="" height="46" width="46" />
                                        <div class="ms-3">
                                            <p class="text-secondary">Archive Document</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="row g-4 mb-5">
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <a th:href="@{/document/signature}">
                                    <div class="d-flex align-items-center"><img src="" th:src="@{/images/icons/illustrations/18.png}" alt="" height="46" width="46" />
                                        <div class="ms-3">
                                            <p class="text-secondary">My Signature</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <a th:href="@{/change-password}">
                                    <div class="d-flex align-items-center"><img src="" th:src="@{/images/icons/illustrations/26.png}" alt="" height="46" width="46" />
                                        <div class="ms-3">
                                            <p class="text-secondary">Change Password</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card mt-2">
                    <div class="card-body">
                        <h5 class="card-title text-primary mt-1 mb-2">Pending Documents</h5>
                        <table class="table table-responsive table-sm table-striped fs--1 mb-0 mt-1 border-200" id="xticketTable">
                            <thead>
                                <tr>
                                    <th class="sort align-middle ps-3 text-primary" scope="col" data-sort="date">Date</th>
                                    <th class="sort align-middle ps-3 text-primary" scope="col" data-sort="requestBy">Created By</th>
                                    <th class="sort align-middle ps-3 text-primary" scope="col" data-sort="documentId">Document Id</th>
                                    <th class="sort align-middle ps-3 text-primary" scope="col" data-sort="document">Document Type</th>
                                    <th class="sort align-middle ps-3 text-primary" scope="col" data-sort="priority">Priority</th>
                                    <th class="sort align-middle ps-3 text-primary" scope="col" data-sort="sla">SLA</th>
                                    <th class="sort align-middle ps-3 text-primary" scope="col" data-sort="rating">Action</th>
                                </tr>
                            </thead>
                            <tbody class="list" id="deal-tables-body" th:if="${session.dataList != null}">
                                <tr th:each="rec : ${session.dataList}" class="position-static">
                                    <td th:text="${rec.createdAt}" class="date align-middle white-space-nowrap start ps-3"></td>
                                    <td th:text="${rec.createdBy}" class="requestBy align-middle white-space-nowrap start ps-3"></td>
                                    <td th:text="${rec.documentId}" class="ticketId align-middle white-space-nowrap start ps-3"></td>
                                    <td th:text="${rec.documentTypeName}" class="serviceUnit align-middle white-space-nowrap start ps-3"></td>
                                    <td th:text="${rec.priority}" class="priority align-middle white-space-nowrap start ps-3"></td>
                                    <td th:text="${rec.slaExpiry}" class="sla align-middle white-space-nowrap start ps-3"></td>
                                    <td class="ticketId align-middle white-space-nowrap start ps-3">
                                        <a class="text-success"  href="#!" th:href="@{'/document/approve/details?seid=' + ${rec.documentId}}">
                                            <span class="fas fa-eye action-icons" data-bs-toggle="tooltip" data-bs-placement="right" title="View Document Details"></span>
                                        </a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <th:block th:replace="~{fragments/entityscFragments :: footer}"></th:block>
            </div>
        </main>
        <th:block th:replace="~{fragments/entityscFragments :: scriptfiles}"></th:block>
        <script th:inline="javascript">
            /* -------------------------------------------------------------------------- */
            /*                   Monthly Documents Processed                              */
            /* -------------------------------------------------------------------------- */
            var monthlyDocumentsChart = echarts.init(document.getElementById('monthlyDocuments'));
            var monthlyDocumentsOption = {
                title: {
                    text: 'This Month Documents'
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {},
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: [[${session.daysToDate}]],
                    boundaryGap: false
                },
                yAxis: {
                    type: 'value',
                    axisLabel: {
                        formatter: '{value}'
                    }
                },
                series: [
                    {
                        name: 'Documents',
                        type: 'line',
                        data: [[${session.documentCount}]]

                    },
                    {
                        name: 'Violated SLA',
                        type: 'line',
                        data: [[${session.documentViolatedSLACount}]]
                    }
                ]
            };
            monthlyDocumentsOption && monthlyDocumentsChart.setOption(monthlyDocumentsOption);
        </script>
    </body>
</html>